[
  {
    "name": "import ./bar/foo",
    "src": {
      "./main.wgsl": "\n          import ./bar/foo \n          fn main() {\n            foo();\n          }\n       ",
      "./bar.wgsl": "\n          export fn foo() { }\n       "
    }
  },
  {
    "name": "main has other root elements",
    "src": {
      "./main.wgsl": "\n          struct Uniforms {\n            a: u32\n          }\n\n          @group(0) @binding(0) var<uniform> u: Uniforms;\n\n          fn main() { }\n      "
    }
  },
  {
    "name": "import foo as bar",
    "src": {
      "./main.wgsl": "\n        import ./file1/foo as bar;\n\n        fn main() {\n          bar();\n        }\n      ",
      "./file1.wgsl": "\n        export fn foo() { /* fooImpl */ }\n      "
    }
  },
  {
    "name": "import twice doesn't get two copies",
    "src": {
      "./main.wgsl": "\n        import ./file1/foo\n        import ./file2/bar\n\n        fn main() {\n          foo();\n          bar();\n        }\n      ",
      "./file1.wgsl": "\n        export fn foo() { /* fooImpl */ }\n      ",
      "./file2.wgsl": "\n        import ./file1/foo\n        export fn bar() { foo(); }\n      "
    }
  },
  {
    "name": "imported fn calls support fn with root conflict",
    "src": {
      "./main.wgsl": "\n        import foo from ./file1\n\n        fn main() { foo(); }\n        fn conflicted() { }\n      ",
      "./file1.wgsl": "\n        export fn foo() {\n          conflicted(0);\n          conflicted(1);\n        }\n        fn conflicted(a:i32) {}\n      "
    }
  },
  {
    "name": "import twice with two as names",
    "src": {
      "./main.wgsl": "\n        import ./file1/foo as bar\n        import ./file1/foo as zap\n\n        fn main() { bar(); zap(); }\n      ",
      "./file1.wgsl": "\n        export fn foo() { }\n      "
    }
  },
  {
    "name": "import transitive conflicts with main",
    "src": {
      "./main.wgsl": "\n        import ./file1/mid\n\n        fn main() {\n          mid();\n        }\n\n        fn grand() {\n          /* main impl */\n        }\n      ",
      "./file1.wgsl": "\n        import ./file2/grand\n        \n        export fn mid() { grand(); }\n      ",
      "./file2.wgsl": "\n        export fn grand() { /* grandImpl */ }\n      "
    }
  }
]